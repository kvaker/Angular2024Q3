<app-header
  (sortByChanged)="onSortByChanged($event)"
  (searchTermChanged)="onSearch($event)"
></app-header>

<main>
  <div *ngIf="paginatedResults$ | async as paginatedResults; else loading">
    <div *ngIf="paginatedResults && paginatedResults.length; else noResults">
      <section class="card-board">
        <div class="card-container">
          <app-search-item
            *ngFor="let searchItem of paginatedResults"
            [searchItem]="searchItem"
            class="card"
          ></app-search-item>
          <div class="card-list">
            <div *ngFor="let card of (customCards$ | async)" class="card">
              <h3>{{ card.title }}</h3>
              <p>{{ card.description }}</p>
              <img [src]="card.imageLink" alt="Card Image" class="card-image" />
              <p>Video: <a [href]="card.videoLink">{{ card.videoLink }}</a></p>
              <p>Creation Date: {{ card.creationDate }}</p>
              <p>Tags: {{ card.tags.join(', ') }}</p>
            </div>
          </div>
        </div>
      </section>
      <div class="pagination-controls">
        <button (click)="prevPage()" [disabled]="(currentPage$ | async) === 1">Previous</button>
        <span>Page {{ currentPage$ | async }} of {{ totalPages }}</span>
        <button (click)="nextPage()" [disabled]="(currentPage$ | async) === totalPages">
          Next
        </button>
      </div>
    </div>
    <ng-template #noResults>
      <p>No results found.</p>
    </ng-template>
  </div>

  <ng-template #loading>
    <p>Loading results...</p>
  </ng-template>
</main>
